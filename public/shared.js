var $jscomp={scope:{},getGlobal:function($maybeGlobal$$){return"undefined"!=typeof window&&window===$maybeGlobal$$?$maybeGlobal$$:"undefined"!=typeof global?global:$maybeGlobal$$}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function $$jscomp$initSymbol$(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function $$jscomp$initSymbol$(){}};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function $$jscomp$Symbol$($description$$){return"jscomp_symbol_"+$description$$+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function $$jscomp$initSymbolIterator$(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function $$jscomp$initSymbolIterator$(){}};
$jscomp.makeIterator=function $$jscomp$makeIterator$($iterable$$){$jscomp.initSymbolIterator();if($iterable$$[$jscomp.global.Symbol.iterator])return $iterable$$[$jscomp.global.Symbol.iterator]();if(!($iterable$$ instanceof Array||"string"==typeof $iterable$$||$iterable$$ instanceof String))throw new TypeError($iterable$$+" is not iterable");var $index$$=0;return{next:function(){return $index$$==$iterable$$.length?{done:!0}:{done:!1,value:$iterable$$[$index$$++]}}}};
$jscomp.arrayFromIterator=function $$jscomp$arrayFromIterator$($iterator$$){for(var $i$$,$arr$$=[];!($i$$=$iterator$$.next()).done;)$arr$$.push($i$$.value);return $arr$$};$jscomp.arrayFromIterable=function $$jscomp$arrayFromIterable$($iterable$$){return $iterable$$ instanceof Array?$iterable$$:$jscomp.arrayFromIterator($jscomp.makeIterator($iterable$$))};
$jscomp.arrayFromArguments=function $$jscomp$arrayFromArguments$($args$$){for(var $result$$=[],$i$$=0;$i$$<$args$$.length;$i$$++)$result$$.push($args$$[$i$$]);return $result$$};
$jscomp.inherits=function $$jscomp$inherits$($childCtor$$,$parentCtor$$){function $tempCtor$$(){}$tempCtor$$.prototype=$parentCtor$$.prototype;$childCtor$$.prototype=new $tempCtor$$;$childCtor$$.prototype.constructor=$childCtor$$;for(var $p$$ in $parentCtor$$)if($jscomp.global.Object.defineProperties){var $descriptor$$=$jscomp.global.Object.getOwnPropertyDescriptor($parentCtor$$,$p$$);$jscomp.global.Object.defineProperty($childCtor$$,$p$$,$descriptor$$)}else $childCtor$$[$p$$]=$parentCtor$$[$p$$]};
$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function $$jscomp$array$done_$(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function $$jscomp$array$arrayIterator_$($array$$,$func$$){$array$$ instanceof String&&($array$$=String($array$$));var $i$$=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var $$jscomp$compprop0$$={},$iter$$=($$jscomp$compprop0$$.next=function $$$jscomp$compprop0$$$next$(){if($i$$<$array$$.length){var $index$$=$i$$++;return{value:$func$$($index$$,$array$$[$index$$]),done:!1}}$iter$$.next=$jscomp.array.done_;return $jscomp.array.done_()},$$jscomp$compprop0$$[Symbol.iterator]=
function $$$jscomp$compprop0$$$Symbol$iterator$(){return $iter$$},$$jscomp$compprop0$$);return $iter$$};$jscomp.array.findInternal_=function $$jscomp$array$findInternal_$($array$$,$callback$$,$thisArg$$){$array$$ instanceof String&&($array$$=String($array$$));for(var $len$$=$array$$.length,$i$$=0;$i$$<$len$$;$i$$++){var $value$$=$array$$[$i$$];if($callback$$.call($thisArg$$,$value$$,$i$$,$array$$))return{i:$i$$,v:$value$$}}return{i:-1,v:void 0}};
$jscomp.array.from=function $$jscomp$array$from$($arrayLike$$1_iter$$,$opt_mapFn$$,$opt_thisArg$$){$opt_mapFn$$=void 0===$opt_mapFn$$?function($x$$){return $x$$}:$opt_mapFn$$;var $result$$=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if($arrayLike$$1_iter$$[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();$arrayLike$$1_iter$$=$arrayLike$$1_iter$$[Symbol.iterator]();for(var $len$$;!($len$$=$arrayLike$$1_iter$$.next()).done;)$result$$.push($opt_mapFn$$.call($opt_thisArg$$,
$len$$.value))}else{$len$$=$arrayLike$$1_iter$$.length;for(var $i$$=0;$i$$<$len$$;$i$$++)$result$$.push($opt_mapFn$$.call($opt_thisArg$$,$arrayLike$$1_iter$$[$i$$]))}return $result$$};$jscomp.array.of=function $$jscomp$array$of$($elements$$){for(var $$jscomp$restParams$$=[],$$jscomp$restIndex$$=0;$$jscomp$restIndex$$<arguments.length;++$$jscomp$restIndex$$)$$jscomp$restParams$$[$$jscomp$restIndex$$-0]=arguments[$$jscomp$restIndex$$];return $jscomp.array.from($$jscomp$restParams$$)};
$jscomp.array.entries=function $$jscomp$array$entries$(){return $jscomp.array.arrayIterator_(this,function($i$$,$v$$){return[$i$$,$v$$]})};$jscomp.array.entries$install=function $$jscomp$array$entries$install$(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function $$jscomp$array$keys$(){return $jscomp.array.arrayIterator_(this,function($i$$){return $i$$})};
$jscomp.array.keys$install=function $$jscomp$array$keys$install$(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function $$jscomp$array$values$(){return $jscomp.array.arrayIterator_(this,function($_$$,$v$$){return $v$$})};$jscomp.array.values$install=function $$jscomp$array$values$install$(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};
$jscomp.array.copyWithin=function $$jscomp$array$copyWithin$($target$$,$start$$,$opt_end$$){var $len$$=this.length;$target$$=Number($target$$);$start$$=Number($start$$);$opt_end$$=Number(null!=$opt_end$$?$opt_end$$:$len$$);if($target$$<$start$$)for($opt_end$$=Math.min($opt_end$$,$len$$);$start$$<$opt_end$$;)$start$$ in this?this[$target$$++]=this[$start$$++]:(delete this[$target$$++],$start$$++);else for($opt_end$$=Math.min($opt_end$$,$len$$+$start$$-$target$$),$target$$+=$opt_end$$-$start$$;$opt_end$$>
$start$$;)--$opt_end$$ in this?this[--$target$$]=this[$opt_end$$]:delete this[$target$$];return this};$jscomp.array.copyWithin$install=function $$jscomp$array$copyWithin$install$(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function $$jscomp$array$fill$($value$$,$i$$,$opt_end$$){null!=$opt_end$$&&$value$$.length||($opt_end$$=this.length||0);$opt_end$$=Number($opt_end$$);for($i$$=Number((void 0===$i$$?0:$i$$)||0);$i$$<$opt_end$$;$i$$++)this[$i$$]=$value$$;return this};$jscomp.array.fill$install=function $$jscomp$array$fill$install$(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};
$jscomp.array.find=function $$jscomp$array$find$($callback$$,$opt_thisArg$$){return $jscomp.array.findInternal_(this,$callback$$,$opt_thisArg$$).v};$jscomp.array.find$install=function $$jscomp$array$find$install$(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};$jscomp.array.findIndex=function $$jscomp$array$findIndex$($callback$$,$opt_thisArg$$){return $jscomp.array.findInternal_(this,$callback$$,$opt_thisArg$$).i};
$jscomp.array.findIndex$install=function $$jscomp$array$findIndex$install$(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};
$jscomp.Map=function $$jscomp$Map$($$jscomp$iter$1_opt_iterable$$){$$jscomp$iter$1_opt_iterable$$=void 0===$$jscomp$iter$1_opt_iterable$$?[]:$$jscomp$iter$1_opt_iterable$$;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if($$jscomp$iter$1_opt_iterable$$){$$jscomp$iter$1_opt_iterable$$=$jscomp.makeIterator($$jscomp$iter$1_opt_iterable$$);for(var $$jscomp$key$item_item$$=$$jscomp$iter$1_opt_iterable$$.next();!$$jscomp$key$item_item$$.done;$$jscomp$key$item_item$$=$$jscomp$iter$1_opt_iterable$$.next())$$jscomp$key$item_item$$=
$$jscomp$key$item_item$$.value,this.set($$jscomp$key$item_item$$[0],$$jscomp$key$item_item$$[1])}};
$jscomp.Map.checkBrowserConformance_=function $$jscomp$Map$checkBrowserConformance_$(){var $Map$$=$jscomp.global.Map;if(!$Map$$||!$Map$$.prototype.entries||!Object.seal)return!1;try{var $key$$=Object.seal({x:4}),$map$$=new $Map$$($jscomp.makeIterator([[$key$$,"s"]]));if("s"!=$map$$.get($key$$)||1!=$map$$.size||$map$$.get({x:4})||$map$$.set({x:4},"t")!=$map$$||2!=$map$$.size)return!1;var $iter$$=$map$$.entries(),$item$$=$iter$$.next();if($item$$.done||$item$$.value[0]!=$key$$||"s"!=$item$$.value[1])return!1;
$item$$=$iter$$.next();return $item$$.done||4!=$item$$.value[0].x||"t"!=$item$$.value[1]||!$iter$$.next().done?!1:!0}catch($err$$){return!1}};$jscomp.Map.createHead_=function $$jscomp$Map$createHead_$(){var $head$$={};return $head$$.previous=$head$$.next=$head$$.head=$head$$};
$jscomp.Map.getId_=function $$jscomp$Map$getId_$($obj$$){if(!($obj$$ instanceof Object))return String($obj$$);$jscomp.Map.key_ in $obj$$||$obj$$ instanceof Object&&Object.isExtensible&&Object.isExtensible($obj$$)&&$jscomp.Map.defineProperty_($obj$$,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in $obj$$?$obj$$[$jscomp.Map.key_]:" "+$obj$$};
$jscomp.Map.prototype.set=function $$jscomp$Map$$set$($key$$,$value$$){var $$jscomp$destructuring$var0_entry$$=this.maybeGetEntry_($key$$),$id$$=$$jscomp$destructuring$var0_entry$$.id,$list$$=$$jscomp$destructuring$var0_entry$$.list,$$jscomp$destructuring$var0_entry$$=$$jscomp$destructuring$var0_entry$$.entry;$list$$||($list$$=this.data_[$id$$]=[]);$$jscomp$destructuring$var0_entry$$?$$jscomp$destructuring$var0_entry$$.value=$value$$:($$jscomp$destructuring$var0_entry$$={next:this.head_,previous:this.head_.previous,
head:this.head_,key:$key$$,value:$value$$},$list$$.push($$jscomp$destructuring$var0_entry$$),this.head_.previous.next=$$jscomp$destructuring$var0_entry$$,this.head_.previous=$$jscomp$destructuring$var0_entry$$,this.size++);return this};
$jscomp.Map.prototype["delete"]=function $$jscomp$Map$$delete$($id$$5_key$$){var $$jscomp$destructuring$var1_entry$$=this.maybeGetEntry_($id$$5_key$$);$id$$5_key$$=$$jscomp$destructuring$var1_entry$$.id;var $list$$=$$jscomp$destructuring$var1_entry$$.list,$index$$=$$jscomp$destructuring$var1_entry$$.index;return($$jscomp$destructuring$var1_entry$$=$$jscomp$destructuring$var1_entry$$.entry)&&$list$$?($list$$.splice($index$$,1),$list$$.length||delete this.data_[$id$$5_key$$],$$jscomp$destructuring$var1_entry$$.previous.next=
$$jscomp$destructuring$var1_entry$$.next,$$jscomp$destructuring$var1_entry$$.next.previous=$$jscomp$destructuring$var1_entry$$.previous,$$jscomp$destructuring$var1_entry$$.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function $$jscomp$Map$$clear$(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function $$jscomp$Map$$has$($key$$){return!!this.maybeGetEntry_($key$$).entry};
$jscomp.Map.prototype.get=function $$jscomp$Map$$get$($entry$$2_key$$){return($entry$$2_key$$=this.maybeGetEntry_($entry$$2_key$$).entry)&&$entry$$2_key$$.value};
$jscomp.Map.prototype.maybeGetEntry_=function $$jscomp$Map$$maybeGetEntry_$($key$$){var $id$$=$jscomp.Map.getId_($key$$),$list$$=this.data_[$id$$];if($list$$)for(var $index$$=0;$index$$<$list$$.length;$index$$++){var $entry$$=$list$$[$index$$];if($key$$!==$key$$&&$entry$$.key!==$entry$$.key||$key$$===$entry$$.key)return{id:$id$$,list:$list$$,index:$index$$,entry:$entry$$}}return{id:$id$$,list:$list$$,index:-1,entry:void 0}};
$jscomp.Map.prototype.entries=function $$jscomp$Map$$entries$(){return this.iter_(function($entry$$){return[$entry$$.key,$entry$$.value]})};$jscomp.Map.prototype.keys=function $$jscomp$Map$$keys$(){return this.iter_(function($entry$$){return $entry$$.key})};$jscomp.Map.prototype.values=function $$jscomp$Map$$values$(){return this.iter_(function($entry$$){return $entry$$.value})};
$jscomp.Map.prototype.forEach=function $$jscomp$Map$$forEach$($callback$$,$opt_thisArg$$){for(var $$jscomp$iter$2$$=$jscomp.makeIterator(this.entries()),$$jscomp$key$entry_entry$$=$$jscomp$iter$2$$.next();!$$jscomp$key$entry_entry$$.done;$$jscomp$key$entry_entry$$=$$jscomp$iter$2$$.next())$$jscomp$key$entry_entry$$=$$jscomp$key$entry_entry$$.value,$callback$$.call($opt_thisArg$$,$$jscomp$key$entry_entry$$[1],$$jscomp$key$entry_entry$$[0],this)};
$jscomp.Map.prototype.iter_=function $$jscomp$Map$$iter_$($func$$){var $map$$=this,$entry$$=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var $$jscomp$compprop3$$={};return $$jscomp$compprop3$$.next=function $$$jscomp$compprop3$$$next$(){if($entry$$){for(;$entry$$.head!=$map$$.head_;)$entry$$=$entry$$.previous;for(;$entry$$.next!=$entry$$.head;)return $entry$$=$entry$$.next,{done:!1,value:$func$$($entry$$)};$entry$$=null}return{done:!0,value:void 0}},$$jscomp$compprop3$$[Symbol.iterator]=
function $$$jscomp$compprop3$$$Symbol$iterator$(){return this},$$jscomp$compprop3$$};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function($obj$$,$key$$,$value$$){Object.defineProperty($obj$$,$key$$,{value:String($value$$)})}:function($obj$$,$key$$,$value$$){$obj$$[$key$$]=String($value$$)};$jscomp.Map.Entry_=function $$jscomp$Map$Entry_$(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;
$jscomp.Map$install=function $$jscomp$Map$install$(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function $$jscomp$Map$install$(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function $$jscomp$math$clz32$($x$$){$x$$=Number($x$$)>>>0;if(0===$x$$)return 32;var $result$$=0;0===($x$$&4294901760)&&($x$$<<=16,$result$$+=16);0===($x$$&4278190080)&&($x$$<<=8,$result$$+=8);0===($x$$&4026531840)&&($x$$<<=4,$result$$+=4);0===($x$$&3221225472)&&($x$$<<=2,$result$$+=2);0===($x$$&2147483648)&&$result$$++;return $result$$};
$jscomp.math.imul=function $$jscomp$math$imul$($a$$,$b$$){$a$$=Number($a$$);$b$$=Number($b$$);var $al$$=$a$$&65535,$bl$$=$b$$&65535;return $al$$*$bl$$+(($a$$>>>16&65535)*$bl$$+$al$$*($b$$>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function $$jscomp$math$sign$($x$$){$x$$=Number($x$$);return 0===$x$$||isNaN($x$$)?$x$$:0<$x$$?1:-1};$jscomp.math.log10=function $$jscomp$math$log10$($x$$){return Math.log($x$$)/Math.LN10};$jscomp.math.log2=function $$jscomp$math$log2$($x$$){return Math.log($x$$)/Math.LN2};
$jscomp.math.log1p=function $$jscomp$math$log1p$($x$$){$x$$=Number($x$$);if(.25>$x$$&&-.25<$x$$){for(var $y$$=$x$$,$d$$=1,$z$$=$x$$,$zPrev$$=0,$s$$=1;$zPrev$$!=$z$$;)$y$$*=$x$$,$s$$*=-1,$z$$=($zPrev$$=$z$$)+$s$$*$y$$/++$d$$;return $z$$}return Math.log(1+$x$$)};$jscomp.math.expm1=function $$jscomp$math$expm1$($x$$){$x$$=Number($x$$);if(.25>$x$$&&-.25<$x$$){for(var $y$$=$x$$,$d$$=1,$z$$=$x$$,$zPrev$$=0;$zPrev$$!=$z$$;)$y$$*=$x$$/++$d$$,$z$$=($zPrev$$=$z$$)+$y$$;return $z$$}return Math.exp($x$$)-1};
$jscomp.math.cosh=function $$jscomp$math$cosh$($x$$){$x$$=Number($x$$);return(Math.exp($x$$)+Math.exp(-$x$$))/2};$jscomp.math.sinh=function $$jscomp$math$sinh$($x$$){$x$$=Number($x$$);return 0===$x$$?$x$$:(Math.exp($x$$)-Math.exp(-$x$$))/2};$jscomp.math.tanh=function $$jscomp$math$tanh$($x$$){$x$$=Number($x$$);if(0===$x$$)return $x$$;var $y$$44_z$$=Math.exp(2*-Math.abs($x$$)),$y$$44_z$$=(1-$y$$44_z$$)/(1+$y$$44_z$$);return 0>$x$$?-$y$$44_z$$:$y$$44_z$$};
$jscomp.math.acosh=function $$jscomp$math$acosh$($x$$){$x$$=Number($x$$);return Math.log($x$$+Math.sqrt($x$$*$x$$-1))};$jscomp.math.asinh=function $$jscomp$math$asinh$($x$$){$x$$=Number($x$$);if(0===$x$$)return $x$$;var $y$$=Math.log(Math.abs($x$$)+Math.sqrt($x$$*$x$$+1));return 0>$x$$?-$y$$:$y$$};$jscomp.math.atanh=function $$jscomp$math$atanh$($x$$){$x$$=Number($x$$);return($jscomp.math.log1p($x$$)-$jscomp.math.log1p(-$x$$))/2};
$jscomp.math.hypot=function $$jscomp$math$hypot$($x$$,$y$$,$rest$$){for(var $$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$=[],$$jscomp$key$z_$jscomp$restIndex$$=2;$$jscomp$key$z_$jscomp$restIndex$$<arguments.length;++$$jscomp$key$z_$jscomp$restIndex$$)$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$[$$jscomp$key$z_$jscomp$restIndex$$-2]=arguments[$$jscomp$key$z_$jscomp$restIndex$$];$x$$=Number($x$$);$y$$=Number($y$$);for(var $max_sum$13$$=Math.max(Math.abs($x$$),Math.abs($y$$)),$$jscomp$iter$4_sum$$=
$jscomp.makeIterator($$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$),$$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$4_sum$$.next();!$$jscomp$key$z_$jscomp$restIndex$$.done;$$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$4_sum$$.next())$max_sum$13$$=Math.max($max_sum$13$$,Math.abs($$jscomp$key$z_$jscomp$restIndex$$.value));if(1E100<$max_sum$13$$||1E-100>$max_sum$13$$){$x$$/=$max_sum$13$$;$y$$/=$max_sum$13$$;$$jscomp$iter$4_sum$$=$x$$*$x$$+$y$$*$y$$;$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$=
$jscomp.makeIterator($$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$);for($$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$.next();!$$jscomp$key$z_$jscomp$restIndex$$.done;$$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$.next())$$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$key$z_$jscomp$restIndex$$.value,$$jscomp$key$z_$jscomp$restIndex$$=Number($$jscomp$key$z_$jscomp$restIndex$$)/$max_sum$13$$,$$jscomp$iter$4_sum$$+=$$jscomp$key$z_$jscomp$restIndex$$*
$$jscomp$key$z_$jscomp$restIndex$$;return Math.sqrt($$jscomp$iter$4_sum$$)*$max_sum$13$$}$max_sum$13$$=$x$$*$x$$+$y$$*$y$$;$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$=$jscomp.makeIterator($$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$);for($$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$.next();!$$jscomp$key$z_$jscomp$restIndex$$.done;$$jscomp$key$z_$jscomp$restIndex$$=$$jscomp$iter$5_$jscomp$iter$6_$jscomp$restParams$$.next())$$jscomp$key$z_$jscomp$restIndex$$=
$$jscomp$key$z_$jscomp$restIndex$$.value,$max_sum$13$$+=$$jscomp$key$z_$jscomp$restIndex$$*$$jscomp$key$z_$jscomp$restIndex$$;return Math.sqrt($max_sum$13$$)};$jscomp.math.trunc=function $$jscomp$math$trunc$($x$$){$x$$=Number($x$$);if(isNaN($x$$)||Infinity===$x$$||-Infinity===$x$$||0===$x$$)return $x$$;var $y$$=Math.floor(Math.abs($x$$));return 0>$x$$?-$y$$:$y$$};
$jscomp.math.cbrt=function $$jscomp$math$cbrt$($x$$){if(0===$x$$)return $x$$;$x$$=Number($x$$);var $y$$=Math.pow(Math.abs($x$$),1/3);return 0>$x$$?-$y$$:$y$$};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function $$jscomp$number$isFinite$($x$$){return"number"!==typeof $x$$?!1:!isNaN($x$$)&&Infinity!==$x$$&&-Infinity!==$x$$};$jscomp.number.isInteger=function $$jscomp$number$isInteger$($x$$){return $jscomp.number.isFinite($x$$)?$x$$===Math.floor($x$$):!1};
$jscomp.number.isNaN=function $$jscomp$number$isNaN$($x$$){return"number"===typeof $x$$&&isNaN($x$$)};$jscomp.number.isSafeInteger=function $$jscomp$number$isSafeInteger$($x$$){return $jscomp.number.isInteger($x$$)&&Math.abs($x$$)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function $$jscomp$object$assign$($target$$,$sources$$){for(var $$jscomp$iter$7_$jscomp$restParams$$=[],$$jscomp$key$source_$jscomp$restIndex$$2_source$$=1;$$jscomp$key$source_$jscomp$restIndex$$2_source$$<arguments.length;++$$jscomp$key$source_$jscomp$restIndex$$2_source$$)$$jscomp$iter$7_$jscomp$restParams$$[$$jscomp$key$source_$jscomp$restIndex$$2_source$$-1]=arguments[$$jscomp$key$source_$jscomp$restIndex$$2_source$$];$$jscomp$iter$7_$jscomp$restParams$$=$jscomp.makeIterator($$jscomp$iter$7_$jscomp$restParams$$);
for($$jscomp$key$source_$jscomp$restIndex$$2_source$$=$$jscomp$iter$7_$jscomp$restParams$$.next();!$$jscomp$key$source_$jscomp$restIndex$$2_source$$.done;$$jscomp$key$source_$jscomp$restIndex$$2_source$$=$$jscomp$iter$7_$jscomp$restParams$$.next()){var $$jscomp$key$source_$jscomp$restIndex$$2_source$$=$$jscomp$key$source_$jscomp$restIndex$$2_source$$.value,$key$$;for($key$$ in $$jscomp$key$source_$jscomp$restIndex$$2_source$$)Object.prototype.hasOwnProperty.call($$jscomp$key$source_$jscomp$restIndex$$2_source$$,
$key$$)&&($target$$[$key$$]=$$jscomp$key$source_$jscomp$restIndex$$2_source$$[$key$$])}return $target$$};$jscomp.object.is=function $$jscomp$object$is$($left$$,$right$$){return $left$$===$right$$?0!==$left$$||1/$left$$===1/$right$$:$left$$!==$left$$&&$right$$!==$right$$};
$jscomp.Set=function $$jscomp$Set$($$jscomp$iter$8_opt_iterable$$){$$jscomp$iter$8_opt_iterable$$=void 0===$$jscomp$iter$8_opt_iterable$$?[]:$$jscomp$iter$8_opt_iterable$$;this.map_=new $jscomp.Map;if($$jscomp$iter$8_opt_iterable$$){$$jscomp$iter$8_opt_iterable$$=$jscomp.makeIterator($$jscomp$iter$8_opt_iterable$$);for(var $$jscomp$key$item$$=$$jscomp$iter$8_opt_iterable$$.next();!$$jscomp$key$item$$.done;$$jscomp$key$item$$=$$jscomp$iter$8_opt_iterable$$.next())this.add($$jscomp$key$item$$.value)}this.size=
this.map_.size};
$jscomp.Set.checkBrowserConformance_=function $$jscomp$Set$checkBrowserConformance_$(){var $Set$$1_iter$$=$jscomp.global.Set;if(!$Set$$1_iter$$||!$Set$$1_iter$$.prototype.entries||!Object.seal)return!1;var $value$$=Object.seal({x:4}),$Set$$1_iter$$=new $Set$$1_iter$$($jscomp.makeIterator([$value$$]));if($Set$$1_iter$$.has($value$$)||1!=$Set$$1_iter$$.size||$Set$$1_iter$$.add($value$$)!=$Set$$1_iter$$||1!=$Set$$1_iter$$.size||$Set$$1_iter$$.add({x:4})!=$Set$$1_iter$$||2!=$Set$$1_iter$$.size)return!1;var $Set$$1_iter$$=
$Set$$1_iter$$.entries(),$item$$=$Set$$1_iter$$.next();if($item$$.done||$item$$.value[0]!=$value$$||$item$$.value[1]!=$value$$)return!1;$item$$=$Set$$1_iter$$.next();return $item$$.done||$item$$.value[0]==$value$$||4!=$item$$.value[0].x||$item$$.value[1]!=$item$$.value[0]?!1:$Set$$1_iter$$.next().done};$jscomp.Set.prototype.add=function $$jscomp$Set$$add$($value$$){this.map_.set($value$$,$value$$);this.size=this.map_.size;return this};
$jscomp.Set.prototype["delete"]=function $$jscomp$Set$$delete$($result$$3_value$$){$result$$3_value$$=this.map_["delete"]($result$$3_value$$);this.size=this.map_.size;return $result$$3_value$$};$jscomp.Set.prototype.clear=function $$jscomp$Set$$clear$(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function $$jscomp$Set$$has$($value$$){return this.map_.has($value$$)};$jscomp.Set.prototype.entries=function $$jscomp$Set$$entries$(){return this.map_.entries()};
$jscomp.Set.prototype.values=function $$jscomp$Set$$values$(){return this.map_.values()};$jscomp.Set.prototype.forEach=function $$jscomp$Set$$forEach$($callback$$,$opt_thisArg$$){var $$jscomp$this$$=this;this.map_.forEach(function($value$$){return $callback$$.call($opt_thisArg$$,$value$$,$value$$,$$jscomp$this$$)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;
$jscomp.Set$install=function $$jscomp$Set$install$(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function $$jscomp$Set$install$(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function $$jscomp$string$noRegExp_$($str$$,$func$$){if($str$$ instanceof RegExp)throw new TypeError("First argument to String.prototype."+$func$$+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function $$jscomp$string$fromCodePoint$($codepoints$$){for(var $$jscomp$iter$9_$jscomp$restParams$$=[],$$jscomp$restIndex$$3_result$$=0;$$jscomp$restIndex$$3_result$$<arguments.length;++$$jscomp$restIndex$$3_result$$)$$jscomp$iter$9_$jscomp$restParams$$[$$jscomp$restIndex$$3_result$$-0]=arguments[$$jscomp$restIndex$$3_result$$];for(var $$jscomp$restIndex$$3_result$$="",$$jscomp$iter$9_$jscomp$restParams$$=$jscomp.makeIterator($$jscomp$iter$9_$jscomp$restParams$$),$$jscomp$key$code_code$$=
$$jscomp$iter$9_$jscomp$restParams$$.next();!$$jscomp$key$code_code$$.done;$$jscomp$key$code_code$$=$$jscomp$iter$9_$jscomp$restParams$$.next()){$$jscomp$key$code_code$$=$$jscomp$key$code_code$$.value;$$jscomp$key$code_code$$=+$$jscomp$key$code_code$$;if(0>$$jscomp$key$code_code$$||1114111<$$jscomp$key$code_code$$||$$jscomp$key$code_code$$!==Math.floor($$jscomp$key$code_code$$))throw new RangeError("invalid_code_point "+$$jscomp$key$code_code$$);65535>=$$jscomp$key$code_code$$?$$jscomp$restIndex$$3_result$$+=
String.fromCharCode($$jscomp$key$code_code$$):($$jscomp$key$code_code$$-=65536,$$jscomp$restIndex$$3_result$$+=String.fromCharCode($$jscomp$key$code_code$$>>>10&1023|55296),$$jscomp$restIndex$$3_result$$+=String.fromCharCode($$jscomp$key$code_code$$&1023|56320))}return $$jscomp$restIndex$$3_result$$};
$jscomp.string.repeat=function $$jscomp$string$repeat$($copies$$){var $string$$=this.toString();if(0>$copies$$||1342177279<$copies$$)throw new RangeError("Invalid count value");$copies$$|=0;for(var $result$$="";$copies$$;)if($copies$$&1&&($result$$+=$string$$),$copies$$>>>=1)$string$$+=$string$$;return $result$$};$jscomp.string.repeat$install=function $$jscomp$string$repeat$install$(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function $$jscomp$string$codePointAt$($position_second$$){var $string$$=this.toString(),$size$$=$string$$.length;$position_second$$=Number($position_second$$)||0;if(0<=$position_second$$&&$position_second$$<$size$$){$position_second$$|=0;var $first$$=$string$$.charCodeAt($position_second$$);if(55296>$first$$||56319<$first$$||$position_second$$+1===$size$$)return $first$$;$position_second$$=$string$$.charCodeAt($position_second$$+1);return 56320>$position_second$$||57343<
$position_second$$?$first$$:1024*($first$$-55296)+$position_second$$+9216}};$jscomp.string.codePointAt$install=function $$jscomp$string$codePointAt$install$(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function $$jscomp$string$includes$($searchString$$,$opt_position$$){$opt_position$$=void 0===$opt_position$$?0:$opt_position$$;$jscomp.string.noRegExp_($searchString$$,"includes");return-1!==this.toString().indexOf($searchString$$,$opt_position$$)};$jscomp.string.includes$install=function $$jscomp$string$includes$install$(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function $$jscomp$string$startsWith$($searchString$$,$opt_position$$){$opt_position$$=void 0===$opt_position$$?0:$opt_position$$;$jscomp.string.noRegExp_($searchString$$,"startsWith");var $string$$=this.toString();$searchString$$+="";for(var $strLen$$=$string$$.length,$searchLen$$=$searchString$$.length,$i$$=Math.max(0,Math.min($opt_position$$|0,$string$$.length)),$j$$=0;$j$$<$searchLen$$&&$i$$<$strLen$$;)if($string$$[$i$$++]!=$searchString$$[$j$$++])return!1;return $j$$>=
$searchLen$$};$jscomp.string.startsWith$install=function $$jscomp$string$startsWith$install$(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function $$jscomp$string$endsWith$($searchString$$,$opt_position$$){$jscomp.string.noRegExp_($searchString$$,"endsWith");var $string$$=this.toString();$searchString$$+="";void 0===$opt_position$$&&($opt_position$$=$string$$.length);for(var $i$$=Math.max(0,Math.min($opt_position$$|0,$string$$.length)),$j$$=$searchString$$.length;0<$j$$&&0<$i$$;)if($string$$[--$i$$]!=$searchString$$[--$j$$])return!1;return 0>=$j$$};
$jscomp.string.endsWith$install=function $$jscomp$string$endsWith$install$(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
this.glitchSquad=function($modules$$){function $__webpack_require__$$($moduleId$$){if($installedModules$$[$moduleId$$])return $installedModules$$[$moduleId$$].exports;var $module$$=$installedModules$$[$moduleId$$]={exports:{},id:$moduleId$$,loaded:!1};$modules$$[$moduleId$$].call($module$$.exports,$module$$,$module$$.exports,$__webpack_require__$$);$module$$.loaded=!0;return $module$$.exports}var $installedModules$$={};$__webpack_require__$$.m=$modules$$;$__webpack_require__$$.c=$installedModules$$;
$__webpack_require__$$.p="/";return $__webpack_require__$$(0)}([function($module$$,$exports_main_1$$,$__webpack_require__$$){$exports_main_1$$=$__webpack_require__$$(1);var $main_ts_1$$=$__webpack_require__$$(18);$__webpack_require__$$(24);$__webpack_require__$$={};$__webpack_require__$$.client=$main_ts_1$$.start;$__webpack_require__$$.server=$exports_main_1$$.glitchSquadServer;$module$$.exports=$__webpack_require__$$},function($make_1_module$$,$exports$$,$__webpack_require__$$){function $start$$($u0$$,
$u1$$){var $state$$=$state_2$$.gamePlay();$state$$.local=!1;new $game_1$$.OnlineGame($u0$$,$u1$$,$state$$,$reduce$$,$animate$$)}function $findOponnent$$($usr$$){var $oponnent$$=$users$$.find(function($u$$){return!$u$$.oponnent&&$u$$!==$usr$$&&$u$$.waiting});$oponnent$$?$start$$($usr$$,$oponnent$$):$usr$$.socket.emit("state",$state_1$$.waitingForOponnent())}var $game_1$$=$__webpack_require__$$(2),$state_1$$=$__webpack_require__$$(4);$make_1_module$$=$__webpack_require__$$(3);var $animate_1$$=$__webpack_require__$$(10),
$reducer_1$$=$__webpack_require__$$(11),$reducer_2$$=$__webpack_require__$$(16),$state_2$$=$__webpack_require__$$(17),$reduce$$=$make_1_module$$.makeReducer([$reducer_2$$.menuReducer,$reducer_1$$.gameReducer]),$animate$$=$make_1_module$$.makeAnimate([$animate_1$$.gameAnimate]),$users$$=[];$exports$$.start=$start$$;$exports$$.glitchSquadServer=function glitchSquadServer($socket$$){var $usr$$={socket:$socket$$,waiting:!1};$users$$.push($usr$$);$socket$$.on("waiting",function(){$usr$$.waiting=!0;$findOponnent$$($usr$$)});
$socket$$.on("disconnect",function(){$users$$.splice($users$$.indexOf($usr$$),1);if($usr$$.oponnent){var $usr$$0$$=$usr$$.oponnent;$usr$$0$$.game.end();$usr$$0$$.waiting=!0;$usr$$0$$.socket.emit("state",$state_1$$.waitingForOponnentOponnentLeft())}})}},function($OnlineGame_module$$,$exports$$,$__webpack_require__$$){var $make_1$$=$__webpack_require__$$(3);$OnlineGame_module$$=function $$OnlineGame_module$$$($p0$$,$p1$$,$state$$,$reducer$$,$animate$$){this.p0=$p0$$;this.p1=$p1$$;this.state=$state$$;
this.reducer=$reducer$$;this.animate=$animate$$;this.actions=[];this.act=this.act.bind(this);this.glitch=this.glitch.bind(this);this.reducer=this.reducer.bind(this);this.animate=this.animate.bind(this);this.initPlayers();this.initState=$make_1$$.cloneDeep($state$$);this.actions=[];this.act({do:0,active:0,player:0,payload:{}})};$OnlineGame_module$$.prototype.end=function $$OnlineGame_module$$$$end$(){this.p0?this.removeUser(this.p0):"";this.p1?this.removeUser(this.p1):"";this.p1=this.p0=void 0};$OnlineGame_module$$.prototype.act=
function $$OnlineGame_module$$$$act$($action$$){if(10===$action$$.do||4<this.actions.length&&.985<Math.random())return this.glitch($make_1$$.cloneDeep(this.initState),[].concat($jscomp.arrayFromIterable(this.actions)));var $state$$=this.reducer(this.state,$action$$);this.saveState($state$$,$action$$);this.animate($state$$.animations.find(function($a$$){return $a$$.payload&&10===$a$$.payload.do})?$state$$.animations.filter(function($a$$){return $a$$.payload&&10===$a$$.payload.do}):$state$$.animations,
this.act);$state$$.animations=[];this.state=$state$$;this.emit($state$$);11===$action$$.do?this.win():""};$OnlineGame_module$$.prototype.win=function $$OnlineGame_module$$$$win$(){this.p0.waiting=!1;this.p1.waiting=!1;this.end()};$OnlineGame_module$$.prototype.initPlayers=function $$OnlineGame_module$$$$initPlayers$(){var $$jscomp$this$$=this;this.p0.asPlayer=0;this.p1.asPlayer=1;this.p0.oponnent=this.p1;this.p1.oponnent=this.p0;this.p0.game=this;this.p1.game=this;this.p0.socket.on("action",function($a$$){return 0===
$a$$.player?$$jscomp$this$$.act($a$$):""});this.p1.socket.on("action",function($a$$){return 1===$a$$.player?$$jscomp$this$$.act($a$$):""});this.p0.socket.on("disconnect",function(){return $$jscomp$this$$.end()});this.p1.socket.on("disconnect",function(){return $$jscomp$this$$.end()})};$OnlineGame_module$$.prototype.removeUser=function $$OnlineGame_module$$$$removeUser$($p$$){$p$$&&($p$$.socket?$p$$.socket.removeAllListeners("action"):"",$p$$.oponnent=void 0,$p$$.game=void 0,$p$$.asPlayer=void 0)};
$OnlineGame_module$$.prototype.emit=function $$OnlineGame_module$$$$emit$($state$$){this.p0?this.p0.socket.emit("state",$state$$):"";this.p1?this.p1.socket.emit("state",$state$$):""};$OnlineGame_module$$.prototype.saveState=function $$OnlineGame_module$$$$saveState$($state$$,$action$$){11!==$action$$.do?this.actions.push($action$$):""};$OnlineGame_module$$.prototype.glitch=function $$OnlineGame_module$$$$glitch$($state$$,$actions$$){var $action$$=$actions$$.shift();$state$$.active=$action$$.active;
if(0<$actions$$.length){var $$jscomp$this$$=this;$state$$.glitch=!0;var $nstate$$=this.reducer($state$$,$action$$);$nstate$$.animations=[];this.emit($nstate$$);setTimeout(function(){return $$jscomp$this$$.glitch($nstate$$,$actions$$)},140)}else{$state$$.glitch=!1;var $nstate$0$$=this.reducer($state$$,$action$$);$nstate$0$$.animations&&0<$nstate$0$$.animations.length&&($nstate$0$$.animations=$nstate$0$$.animations.filter(function($a$$){return $a$$.payload?10!==$a$$.payload.do:!0}),$nstate$0$$.animations=
$nstate$0$$.animations.find(function($a$$){return $a$$.payload&&11===$a$$.payload.do})?[$nstate$0$$.animations.find(function($a$$){return $a$$.payload&&11===$a$$.payload.do})]:$nstate$0$$.animations);this.animate($nstate$0$$.animations,this.act);this.state=$nstate$0$$;this.emit($nstate$0$$);11===$action$$.do?this.win():""}};$exports$$.OnlineGame=$OnlineGame_module$$},function($module$$,$exports$$){function $cloneDeep$$($soa$$){return JSON.parse(JSON.stringify($soa$$))}$exports$$.makeRender=function makeRender($renderers$$,
$dom$$){return function($state$$){var $newGameStateHTML$$=$renderers$$.reduce(function($p$$,$c$$){return $p$$+$c$$($state$$)},"");$dom$$.innerHTML=$newGameStateHTML$$}};$exports$$.behave=function behave($behaviours$$,$doIt$$){$behaviours$$.forEach(function($b$$){var $e$$=document.getElementById($b$$.id);$e$$?$e$$[$b$$.event]=function $$e$$$$b$$$event$(){return $doIt$$($b$$.action)}:""})};$exports$$.makeAnimate=function makeAnimate($animators$$){return function animate($animations$$,$doIt$$){$animations$$.forEach(function($animation$$){return $animators$$.forEach(function($a$$){return $a$$($animation$$,
$doIt$$)})})}};$exports$$.makeReducer=function makeReducer($reducers$$){return function($state$$,$action$$){return $reducers$$.reduce(function($p$$,$c$$){return $c$$($p$$,$action$$)},$cloneDeep$$($state$$))}};$exports$$.cloneDeep=$cloneDeep$$},function($module$$,$exports$$,$__webpack_require__$$){function $loadingScreen$$($smap$$){return{location:0,local:!1,hexMap:$mapGen_1$$.trimMap($smap$$.map(function($l$$,$y$$){return $state_1$$.toHex($y$$,$l$$)})),behaviours:[],animations:[],soldiers:[],lastWinner:!1}}
var $mapGen_1$$=$__webpack_require__$$(5),$state_1$$=$__webpack_require__$$(9),$wait$$="#GLITCH##  ;###SQUAD###;Waiting for;## ONLINE #;#OPONNENT #;#online####".split(";"),$left$$="#OPONNENT##;###LEFT### ;Waiting for;## ONLINE #;#OPONNENT #;GLITCHSQUAD".split(";");$exports$$.waitingForOponnent=function waitingForOponnent(){return $loadingScreen$$($wait$$)};$exports$$.waitingForOponnentOponnentLeft=function waitingForOponnentOponnentLeft(){return $loadingScreen$$($left$$)}},function($module$$,$exports$$,
$__webpack_require__$$){function $trimMap$$($map$$){function $trimHex$$($li$$,$h$$,$hi$$){$h$$.walls=$h$$.walls.map(function($w$$,$wi$$){var $JSCompiler_inline_result$$55_neighbour$$inline_66_x$$;a:{if(3!==$w$$&&0!==$h$$.type&&4!==$h$$.type){var $$jscomp$destructuring$var0$$inline_63_y$$=$mapCheck_1$$.getCords($hi$$,$li$$,$wi$$);$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=$$jscomp$destructuring$var0$$inline_63_y$$.x;$$jscomp$destructuring$var0$$inline_63_y$$=$$jscomp$destructuring$var0$$inline_63_y$$.y;
if(0>$$jscomp$destructuring$var0$$inline_63_y$$||0>$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$||$mapSize_1$$.size[0]-1<$$jscomp$destructuring$var0$$inline_63_y$$||$mapSize_1$$.size[1]-1<$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$){$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=.2<Math.random()?3:$w$$;break a}if(!$map$$[$$jscomp$destructuring$var0$$inline_63_y$$]||!$map$$[$$jscomp$destructuring$var0$$inline_63_y$$][$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$]){$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=
$w$$;break a}$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=$map$$[$$jscomp$destructuring$var0$$inline_63_y$$][$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$];if(0===$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$.type||3===$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$.walls[($wi$$+3)%6]){$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=.1<Math.random()?3:$w$$;break a}}$JSCompiler_inline_result$$55_neighbour$$inline_66_x$$=$w$$}return $JSCompiler_inline_result$$55_neighbour$$inline_66_x$$});
return $h$$}return $map$$.map(function($l$$,$li$$){return $l$$.map(function($h$$,$hi$$){return $trimHex$$($li$$,$h$$,$hi$$)})})}var $hexCreate_1$$=$__webpack_require__$$(6),$mapCheck_1$$=$__webpack_require__$$(7),$mapSize_1$$=$__webpack_require__$$(8),$placements$$=[[[1,$mapSize_1$$.size[1]/2-1],[$mapSize_1$$.size[0]-1,1],[$mapSize_1$$.size[0]-2,$mapSize_1$$.size[1]-2]],[[$mapSize_1$$.size[0]-1,$mapSize_1$$.size[1]/2-1],[1,1],[1,$mapSize_1$$.size[1]-3]],[[$mapSize_1$$.size[0]/2-1,1],[1,$mapSize_1$$.size[1]-
2],[$mapSize_1$$.size[0]-2,$mapSize_1$$.size[1]-2]],[[$mapSize_1$$.size[0]/2-1,$mapSize_1$$.size[1]-1],[1,1],[$mapSize_1$$.size[0]-2,1]]];$exports$$.mapGen=function mapGen(){return $trimMap$$(function placeItems($map$$){var $p2_place$$=$placements$$[Math.floor(Math.random()*$placements$$.length)],$pop$$=.5<Math.random(),$d$$=$p2_place$$[0],$p1$$=$p2_place$$[$pop$$?1:2],$p2_place$$=$p2_place$$[$pop$$?2:1];$map$$[$d$$[0]][$d$$[1]]=$hexCreate_1$$.discHex($d$$[1],$d$$[0]);$map$$[$p1$$[0]][$p1$$[1]]=$hexCreate_1$$.evacHex($p1$$[1],
$p1$$[0],0);$map$$[$p2_place$$[0]][$p2_place$$[1]]=$hexCreate_1$$.evacHex($p2_place$$[1],$p2_place$$[0],1);return $map$$}(function randomMap(){function $randomLine$$($y$$){return Array.from(Array($mapSize_1$$.size[1]),function($b$$,$x$$){return $hexCreate_1$$.randomHex($x$$,$y$$)})}return Array.from(Array($mapSize_1$$.size[0]),function($a$$,$y$$){return $randomLine$$($y$$)})}()))};$exports$$.trimMap=$trimMap$$},function($module$$,$exports$$){function $aHex$$($x$$,$y$$){return{x:$x$$,y:$y$$,walls:$randomWalls$$(),
soldiers:[],acts:[],type:.85<Math.random()?0:1}}function $wallType$$($wall$$){return Array.from(Array(6),function(){return $wall$$})}function $randomWalls$$(){return Array.from(Array(6),function oneWall(){return.6<Math.random()?0:.8<Math.random()?1:Math.floor(4*Math.random())})}$exports$$.aHex=$aHex$$;$exports$$.randomHex=function randomHex($x$$,$y$$){return $aHex$$($x$$,$y$$)};$exports$$.symbolHex=function symbolHex($h$$7_x$$,$y$$,$ch$$){$h$$7_x$$=$aHex$$($h$$7_x$$,$y$$);$h$$7_x$$.char=$ch$$;$h$$7_x$$.type=
"#"===$ch$$?0:2;return $h$$7_x$$};$exports$$.evacHex=function evacHex($h$$8_x$$,$y$$,$p$$){$h$$8_x$$=$aHex$$($h$$8_x$$,$y$$);$h$$8_x$$.type=3;$h$$8_x$$.player=$p$$;$h$$8_x$$.walls=$wallType$$(1);return $h$$8_x$$};$exports$$.discHex=function discHex($x$$,$y$$){var $h$$=$aHex$$($x$$,$y$$);$h$$.type=4;$h$$.walls=$wallType$$(2);return $h$$}},function($module$$,$exports$$,$__webpack_require__$$){function $getCords$$($x$$,$y$$,$cx_d$$){var $$jscomp$destructuring$var1$$=$jscomp.makeIterator($exports$$.cords[$y$$%
2][$cx_d$$]);$cx_d$$=$$jscomp$destructuring$var1$$.next().value;$$jscomp$destructuring$var1$$=$$jscomp$destructuring$var1$$.next().value;return{x:$cx_d$$+$x$$,y:$$jscomp$destructuring$var1$$+$y$$}}function $isOnMap$$($x$$,$y$$){return-1<$x$$&&$x$$<$mapSize_1$$.size[1]&&-1<$y$$&&$y$$<$mapSize_1$$.size[0]}function $isNotEmpty$$($x$$,$y$$,$map$$){return 0!==$map$$[$y$$][$x$$].type}function $connectionType$$($wallF_x$$,$y$$,$d$$,$map$$){var $t$$=$getCords$$($wallF_x$$,$y$$,$d$$);$wallF_x$$=$map$$[$y$$][$wallF_x$$].walls[$d$$];
$d$$=$map$$[$t$$.y][$t$$.x].walls[($d$$+3)%6];return $wallF_x$$>$d$$?$wallF_x$$:$d$$}function $connectionIsAtMost$$($x$$,$y$$,$d$$,$map$$,$w$$){var $t$$=$getCords$$($x$$,$y$$,$d$$);return $isOnMap$$($t$$.x,$t$$.y)&&$isNotEmpty$$($t$$.x,$t$$.y,$map$$)&&$connectionType$$($x$$,$y$$,$d$$,$map$$)<=$w$$}function $connectionIs$$($x$$,$y$$,$d$$,$map$$,$w$$){var $t$$=$getCords$$($x$$,$y$$,$d$$);return $isOnMap$$($t$$.x,$t$$.y)&&$isNotEmpty$$($t$$.x,$t$$.y,$map$$)&&$connectionType$$($x$$,$y$$,$d$$,$map$$)===
$w$$}function $allTill$$($next$$1_x$$,$y$$,$d$$,$map$$,$w$$,$acc$$,$i$$){$acc$$=void 0===$acc$$?[]:$acc$$;$i$$=void 0===$i$$?1:$i$$;var $wc$$={x:$next$$1_x$$,y:$y$$,d:$d$$,type:$map$$[$y$$][$next$$1_x$$].walls[$d$$]};$next$$1_x$$=$i$$%2?$getCords$$($next$$1_x$$,$y$$,$d$$):$wc$$;return $isOnMap$$($next$$1_x$$.x,$next$$1_x$$.y)&&$isNotEmpty$$($next$$1_x$$.x,$next$$1_x$$.y,$map$$)&&$wc$$.type<$w$$?$allTill$$($next$$1_x$$.x,$next$$1_x$$.y,($d$$+3)%6,$map$$,$w$$,$acc$$.concat([$wc$$]),$i$$+1):$acc$$}var $mapSize_1$$=
$__webpack_require__$$(8);$exports$$.cords=[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]];$exports$$.mapCheck=function mapCheck($map$$){return!0};$exports$$.getCords=$getCords$$;$exports$$.canMove=function canMove($x$$,$y$$,$d$$,$map$$){return $connectionIsAtMost$$($x$$,$y$$,$d$$,$map$$,1)};$exports$$.isNotEmpty=$isNotEmpty$$;$exports$$.isAccessible=function isAccessible($x$$,$y$$,$d$$,$map$$){return $connectionIsAtMost$$($x$$,$y$$,$d$$,$map$$,1)};$exports$$.isConnected=
function isConnected($x$$,$y$$,$d$$,$map$$){return $connectionIsAtMost$$($x$$,$y$$,$d$$,$map$$,3)};$exports$$.connectionType=$connectionType$$;$exports$$.connectionIsAtMost=$connectionIsAtMost$$;$exports$$.connectionIs=$connectionIs$$;$exports$$.canOpen=function canOpen($tw_x$$,$y$$,$d$$,$map$$){var $t$$=$getCords$$($tw_x$$,$y$$,$d$$);if(!$connectionIs$$($tw_x$$,$y$$,$d$$,$map$$,2))return!1;$tw_x$$=2===$map$$[$y$$][$tw_x$$].walls[$d$$]?{x:$tw_x$$,y:$y$$,d:$d$$}:{x:$t$$.x,y:$t$$.y,d:($d$$+3)%6};return{dx:$t$$.x,
dy:$t$$.y,tx:$tw_x$$.x,ty:$tw_x$$.y,td:$tw_x$$.d}};$exports$$.allTill=$allTill$$},function($module$$,$exports$$){$exports$$.size=[8,10]},function($module$$,$exports$$,$__webpack_require__$$){function $mapCodeNames$$($winner$$,$soldiers$$){return $soldiers$$.map(function($s$$,$i$$){return $s$$.code+"#"+$s$$.name}).concat(["#P"+($winner$$+1)+"#HOTSEAT","# ONLINE###"]).map(function($l$$,$x$$){return $toHex$$($x$$,$l$$)})}function $toHex$$($y$$,$line$$){return $line$$.split("").map(function($s$$,$x$$){return $hexCreate_1$$.symbolHex($x$$,
$y$$,$s$$)})}var $hexCreate_1$$=$__webpack_require__$$(6),$mapGen_1$$=$__webpack_require__$$(5),$b$$=[3,4,5,6,7,8,9,10].map(function($n$$){return{id:"hex-"+$n$$+"-4",event:"onclick",action:{do:1,player:0,active:0,payload:{}}}}).concat([1,2,3,4,5,6,7].map(function($n$$){return{id:"hex-"+$n$$+"-5",event:"onclick",action:{do:12,player:0,active:0,payload:{}}}})),$hexMap$$="####   ## ;### Glitch;##  Squad;##  ;####HOTSEAT;# ONLINE###".split(";").map(function($l$$,$y$$){return $toHex$$($y$$,$l$$)});$exports$$.menuState=
function menuState($winner$$,$soldiers$$){return{location:0,local:!0,hexMap:$mapGen_1$$.trimMap($soldiers$$?$mapCodeNames$$($winner$$,$soldiers$$):$hexMap$$),behaviours:$b$$,soldiers:[],animations:[],lastWinner:$winner$$?$winner$$:!1}};$exports$$.toHex=$toHex$$},function($module$$,$exports$$){$exports$$.gameAnimate=function gameAnimate($animation$$,$doIt$$){switch($animation$$.anime){case 1:setTimeout(function(){return $doIt$$($animation$$.payload)},200);break;case 2:setTimeout(function(){return $doIt$$($animation$$.payload)},
500)}}},function($module$$,$exports$$,$__webpack_require__$$){function $nextSoldier$$($state$$){var $soldiers$$=$state$$.soldiers,$active$$=$state$$.active;if(!$soldiers$$||8!==$soldiers$$.length)return $state$$;if(-1<$active$$&&!$soldiers$$.find(function($s$$){return $s$$.player!==$soldiers$$[$active$$].player&&!$s$$.KIA}))return $delayWin$$($soldiers$$[$active$$].player,$state$$);$state$$.active=($state$$.active+1)%$state$$.soldiers.length;var $soldier$$=$state$$.soldiers[$state$$.active];$soldier$$.moves=
!0===$soldier$$.KIA?0:$soldier$$.movesPerTurn;return $soldier$$.KIA?$forceSkip$$($skillBehave_1$$.updateBehaviour($state$$)):$skillBehave_1$$.updateBehaviour($state$$)}function $grabDisc$$($state$$){var $s$$0$$=$state$$.soldiers[$state$$.active];$s$$0$$.x===$state$$.disc[0]&&$s$$0$$.y===$state$$.disc[1]&&($state$$.soldiers.map(function($s$$){return Object.assign($s$$,{disc:!1})}),$s$$0$$.disc=!0);return $skillBehave_1$$.updateBehaviour($eatAP$$($state$$))}function $shootRifle$$($payload$$,$state$$){var $$jscomp$destructuring$var4_res$$=
$state$$.soldiers[$state$$.active],$$jscomp$destructuring$var4_res$$=$payload$$.wc.reduce(function($$jscomp$destructuring$var5$$,$c$$){return $shootPeople$$($$jscomp$destructuring$var5$$.x,$$jscomp$destructuring$var5$$.y,$c$$,$$jscomp$destructuring$var5$$.t,$$jscomp$destructuring$var5$$.state)},{x:$$jscomp$destructuring$var4_res$$.x,y:$$jscomp$destructuring$var4_res$$.y,t:0,state:$state$$});return $eatAllAP$$($$jscomp$destructuring$var4_res$$.state)}function $shootPeople$$($x$$,$y$$,$w$$,$t$$,$state$$){var $hex$$=
$state$$.hexMap[$w$$.y][$w$$.x],$soldiers$$=$state$$.soldiers,$soldier$$=$soldiers$$[$state$$.active];$t$$=1!==$w$$.type&&2!==$w$$.type||$soldier$$.x===$x$$&&$soldier$$.y===$y$$?$t$$+3:$t$$+10;$w$$.x===$x$$&&$w$$.y===$y$$||$hex$$.soldiers.forEach(function($JSCompiler_temp$$56_s$$){$t$$+=5;if($soldiers$$[$JSCompiler_temp$$56_s$$].KIA)"";else{var $state$$inline_32_state$$=$state$$,$r$$=100*Math.random()>$t$$,$g$$=$r$$&&50<$t$$||!$r$$&&50>$t$$;$r$$?($state$$inline_32_state$$=$g$$?$glitch$$($state$$inline_32_state$$):
$state$$inline_32_state$$,$state$$inline_32_state$$.soldiers[$JSCompiler_temp$$56_s$$].KIA=!0,$state$$inline_32_state$$.soldiers[$JSCompiler_temp$$56_s$$].moves=0,$JSCompiler_temp$$56_s$$=$state$$inline_32_state$$):$JSCompiler_temp$$56_s$$=$g$$?$glitch$$($state$$inline_32_state$$):$state$$inline_32_state$$;$state$$=$JSCompiler_temp$$56_s$$}});return{x:$w$$.x,y:$w$$.y,t:$t$$,state:$state$$}}function $shootClosedWalls$$($payload$$,$state$$){return $payload$$.wc.reduce(function($p$$,$c$$){var $JSCompiler_temp$$;
2===$c$$.type?($p$$.hexMap[$c$$.y][$c$$.x].walls[$c$$.d]=1,$JSCompiler_temp$$=$p$$):$JSCompiler_temp$$=$state$$;return $JSCompiler_temp$$},$state$$)}function $delayWin$$($winner$$,$state$$){$state$$.animations.push({anime:1,payload:{do:11,active:$state$$.active,player:$winner$$,payload:{winner:$winner$$}}});return $state$$}function $win$$($winner$$,$state$$){return $state_1$$.menuState($winner$$,$state$$.soldiers.filter(function($s$$){return $s$$.player===$winner$$}))}function $eatAllAP$$($state$$){$state$$.soldiers[$state$$.active].moves=
0;return $forceSkip$$($state$$)}function $eatAP$$($state$$){var $s$$=$state$$.soldiers[$state$$.active];--$s$$.moves;return $s$$.moves?$state$$:$forceSkip$$($state$$)}function $forceSkip$$($state$$){$state$$.behaviours=[];$state$$.animations.push({anime:1,payload:{do:3,active:$state$$.active,player:$state$$.soldiers[$state$$.active].player,payload:{}}});return $state$$}function $doerAble$$($state$$){return $state$$.soldiers&&0<$state$$.soldiers.length&&-1<$state$$.active?!$state$$.soldiers[$state$$.active].KIA:
!1}function $glitch$$($state$$){$state$$.animations.push({anime:1,payload:{do:10,active:$state$$.active,player:$state$$.soldiers[$state$$.active].player,payload:{}}});return $state$$}var $skillBehave_1$$=$__webpack_require__$$(12),$squad_1$$=$__webpack_require__$$(13),$state_1$$=$__webpack_require__$$(9);$exports$$.gameReducer=function gameReducer($state$$,$action$$){switch($action$$.do){case 3:return $nextSoldier$$($state$$);case 4:var $JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$;
if($doerAble$$($state$$)){$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$action$$.payload.x;var $y$$=$action$$.payload.y,$dx$$inline_19_from$$inline_21_s$$=$state$$.soldiers[$state$$.active];$dx$$inline_19_from$$inline_21_s$$.x=$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$;$dx$$inline_19_from$$inline_21_s$$.y=$y$$;if($dx$$inline_19_from$$inline_21_s$$.disc){var $$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$=
$jscomp.makeIterator($state$$.disc),$dx$$inline_19_from$$inline_21_s$$=$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$.next().value,$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$=$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$.next().value,$dx$$inline_19_from$$inline_21_s$$=$state$$.hexMap[$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$][$dx$$inline_19_from$$inline_21_s$$],$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$=$state$$.hexMap[$y$$][$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$];
3!==$dx$$inline_19_from$$inline_21_s$$.type?$dx$$inline_19_from$$inline_21_s$$.type=1:"";3!==$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$.type?$$jscomp$destructuring$var3$$inline_18_dy$$inline_20_to$$.type=4:"";$state$$.disc=[$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$,$y$$]}$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$skillBehave_1$$.updateBehaviour($eatAP$$($squad_1$$.placeSoldiers($state$$)))}else $JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=
$nextSoldier$$($state$$);return $JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$;case 5:return $doerAble$$($state$$)?($JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$action$$.payload.hwd,$state$$.hexMap[$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$.ty][$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$.tx].walls[$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$.td]=
1,$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$skillBehave_1$$.updateBehaviour($eatAP$$($state$$))):$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$nextSoldier$$($state$$),$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$;case 6:return $doerAble$$($state$$)?$grabDisc$$($state$$):$nextSoldier$$($state$$);case 11:return $doerAble$$($state$$)?$win$$($action$$.payload.winner,
$state$$):$nextSoldier$$($state$$);case 9:return $doerAble$$($state$$)?$delayWin$$($action$$.payload.winner,$state$$):$nextSoldier$$($state$$);case 7:return $doerAble$$($state$$)?$shootRifle$$($action$$.payload,$state$$):$nextSoldier$$($state$$);case 8:return $doerAble$$($state$$)?($JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$action$$.payload,$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$shootRifle$$($JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$,
$shootClosedWalls$$($JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$,$state$$))):$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$=$nextSoldier$$($state$$),$JSCompiler_temp$$2_JSCompiler_temp$$4_JSCompiler_temp$$6_hwd$$inline_24_payload$$inline_27_x$$;default:return $state$$}};$exports$$.nextSoldier=$nextSoldier$$},function($module$$,$exports$$,$__webpack_require__$$){function $evac$$($state$$){$able$$($state$$,
6)?$state$$.behaviours.push({id:"evac-"+$state$$.active,display:"EVAC",event:"onclick",action:{do:9,active:$state$$.active,player:$state$$.soldiers[$state$$.active].player,payload:{winner:$state$$.soldiers[$state$$.active].player}}}):"";return $state$$}function $grab$$($state$$){$able$$($state$$,4)?$state$$.behaviours.push({id:"grab-"+$state$$.active,display:"GRAB",event:"onclick",action:{do:6,active:$state$$.active,player:$state$$.soldiers[$state$$.active].player,payload:{}}}):"";return $state$$}
function $skip$$($state$$){$able$$($state$$,5)?$state$$.behaviours.push({id:"skip-"+$state$$.active,display:"SKIP",event:"onclick",action:{do:3,active:$state$$.active,player:$state$$.soldiers[$state$$.active].player,payload:{}}}):"";return $state$$}function $shootRifle$$($state$$){var $soldiers$$=$state$$.soldiers,$$jscomp$destructuring$var9$$=$soldiers$$[$state$$.active],$x$$=$$jscomp$destructuring$var9$$.x,$y$$=$$jscomp$destructuring$var9$$.y,$player$$=$$jscomp$destructuring$var9$$.player;if(!$able$$($state$$,
1))return $state$$;Array.from(Array(6),function($a$$,$d$$){return $mapCheck_1$$.allTill($x$$,$y$$,$d$$,$state$$.hexMap,2)}).filter(function canShootSomebody($coords$$){return-1<$coords$$.findIndex(function($c$$){return-1<$state$$.hexMap[$c$$.y][$c$$.x].soldiers.findIndex(function($s$$){return $soldiers$$[$s$$].player!==$player$$&&!$soldiers$$[$s$$].KIA})})}).forEach(function($wc$$){var $srb$$={id:"hex-"+$wc$$[$wc$$.length-1].x+"-"+$wc$$[$wc$$.length-1].y+"-"+$wc$$[$wc$$.length-1].d+"-shoot_rifle",
display:"SHOOT",color:"darkred sd-"+$wc$$[$wc$$.length-1].d,event:"onclick",action:{do:7,active:$state$$.active,player:$player$$,payload:{wc:$wc$$}}};$state$$.behaviours.push($srb$$);$state$$.hexMap[$wc$$[$wc$$.length-1].y][$wc$$[$wc$$.length-1].x].acts.push($srb$$)});return $state$$}function $shootHeavy$$($state$$){var $$jscomp$destructuring$var10$$=$state$$.soldiers[$state$$.active],$x$$=$$jscomp$destructuring$var10$$.x,$y$$=$$jscomp$destructuring$var10$$.y,$player$$=$$jscomp$destructuring$var10$$.player;
if(!$able$$($state$$,2,2))return $state$$;Array.from(Array(6),function($a$$,$d$$){return $mapCheck_1$$.allTill($x$$,$y$$,$d$$,$state$$.hexMap,3)}).filter(function($a$$){return 0<$a$$.length}).forEach(function($wc$$){var $shb$$={id:"hex-"+$wc$$[$wc$$.length-1].x+"-"+$wc$$[$wc$$.length-1].y+"-"+$wc$$[$wc$$.length-1].d+"-shoot_heavy",display:"BARRAGE",color:"darkred sd-"+$wc$$[$wc$$.length-1].d+" heavy",event:"onclick",action:{do:8,active:$state$$.active,player:$player$$,payload:{wc:$wc$$}}};$state$$.behaviours.push($shb$$);
$state$$.hexMap[$wc$$[$wc$$.length-1].y][$wc$$[$wc$$.length-1].x].acts.push($shb$$)});return $state$$}function $hack$$($state$$){var $$jscomp$destructuring$var11$$=$state$$.soldiers[$state$$.active],$x$$=$$jscomp$destructuring$var11$$.x,$y$$=$$jscomp$destructuring$var11$$.y,$player$$=$$jscomp$destructuring$var11$$.player;if(!$able$$($state$$,3))return $state$$;Array.from(Array(6),function($a$$,$d$$){return $mapCheck_1$$.canOpen($x$$,$y$$,$d$$,$state$$.hexMap)}).filter(function($a$$){return!!$a$$}).forEach(function($hwd$$){var $ob$$=
{id:"hex-"+$hwd$$.tx+"-"+$hwd$$.ty+"-"+$hwd$$.td+"-hack",display:"HACK",color:"darkgrey",event:"onclick",action:{do:5,active:$state$$.active,player:$player$$,payload:{hwd:$hwd$$}}};$state$$.behaviours.push($ob$$);$state$$.hexMap[$hwd$$.dy][$hwd$$.dx].acts.push($ob$$)});return $state$$}function $moves$$($state$$){var $$jscomp$destructuring$var12$$=$state$$.soldiers[$state$$.active],$x$$0$$=$$jscomp$destructuring$var12$$.x,$y$$0$$=$$jscomp$destructuring$var12$$.y,$player$$=$$jscomp$destructuring$var12$$.player;
if(!$able$$($state$$,0))return $state$$;Array.from(Array(6),function($a$$,$i$$){var $map$$=$state$$.hexMap,$$jscomp$destructuring$var13$$inline_46_y$$=$mapCheck_1$$.getCords($x$$0$$,$y$$0$$,$i$$),$x$$=$$jscomp$destructuring$var13$$inline_46_y$$.x,$$jscomp$destructuring$var13$$inline_46_y$$=$$jscomp$destructuring$var13$$inline_46_y$$.y;return $mapCheck_1$$.canMove($x$$0$$,$y$$0$$,$i$$,$map$$)?{x:$x$$,y:$$jscomp$destructuring$var13$$inline_46_y$$}:!1}).filter(function($a$$){return!!$a$$}).forEach(function($m$$){var $mb_x$$=
$m$$.x,$y$$=$m$$.y,$mb_x$$={id:"hex-"+$mb_x$$+"-"+$y$$+"-4",display:"MOVE",color:"p"+$player$$,event:"onclick",action:{do:4,active:$state$$.active,player:$player$$,payload:{x:$mb_x$$,y:$y$$}}};$state$$.behaviours.push($mb_x$$);$state$$.hexMap[$m$$.y][$m$$.x].acts.push($mb_x$$)});return $state$$}function $able$$($$jscomp$destructuring$var14_state$$,$skill$$,$cost$$){$$jscomp$destructuring$var14_state$$=$$jscomp$destructuring$var14_state$$.soldiers[$$jscomp$destructuring$var14_state$$.active];var $moves$$=
$$jscomp$destructuring$var14_state$$.moves,$skills$$=$$jscomp$destructuring$var14_state$$.skills;return!$$jscomp$destructuring$var14_state$$.KIA&&$moves$$>=(void 0===$cost$$?1:$cost$$)&&-1<$skills$$.indexOf($skill$$)}var $mapCheck_1$$=$__webpack_require__$$(7);$exports$$.updateBehaviour=function updateBehaviour($state$$){$state$$.behaviours=[];$state$$.hexMap.forEach(function($l$$){return $l$$.forEach(function($h$$){return $h$$.acts=[]})});return $shootHeavy$$($shootRifle$$($evac$$($grab$$($hack$$($moves$$($skip$$($state$$)))))))}},
function($module$$,$exports$$,$__webpack_require__$$){function $placeSoldiers$$($state$$){$state$$.hexMap.forEach(function($l$$){return $l$$.forEach(function($h$$){return $h$$.soldiers=[]})});$state$$.soldiers.forEach(function($s$$){return $state$$.hexMap[$s$$.y][$s$$.x].soldiers.push($s$$.i)});return $state$$}function $setIndexes$$($state$$){$state$$.soldiers.forEach(function($s$$,$si$$){return $s$$.i=$si$$});return $state$$}var $classes_1$$=$__webpack_require__$$(14);$exports$$.createSquads=function createSquads($state$$0$$){function $newSquadToState$$($player$$0$$,
$state$$){function $sortSoldiers$$($a$$,$b$$){return $b$$.initiative-$a$$.initiative}var $squad$$=function createSquad($player$$){return[$classes_1$$.soldierSquadie($player$$,"S1"),$classes_1$$.soldierSquadie($player$$,"S2"),$classes_1$$.soldierSquadie($player$$,"S3"),$classes_1$$.soldierHeavy($player$$,"HVY")]}($player$$0$$).sort($sortSoldiers$$);$state$$.soldiers=$state$$.soldiers.concat($squad$$).sort($sortSoldiers$$);$state$$.hexMap.forEach(function($l$$){return $l$$.forEach(function($h$$){return $h$$.player===
$player$$0$$?$squad$$.forEach(function($s$$){$s$$.x=$h$$.x;$s$$.y=$h$$.y}):""})});return $state$$}return $placeSoldiers$$($setIndexes$$($newSquadToState$$(0,$newSquadToState$$(1,$state$$0$$))))};$exports$$.placeSoldiers=$placeSoldiers$$;$exports$$.setIndexes=$setIndexes$$},function($module$$,$exports$$,$__webpack_require__$$){var $n$$=$__webpack_require__$$(15).NAMES.split(",");$exports$$.soldierSquadie=function soldierSquadie($player$$,$name$$){return{type:1,code:"SQ",moves:2,movesPerTurn:2,initiative:5+
5*Math.random(),KIA:!1,skills:[6,0,1,3,4,5],player:$player$$,name:$n$$[Math.floor(Math.random()*$n$$.length)],x:1,y:1,i:0}};$exports$$.soldierHeavy=function soldierHeavy($player$$,$name$$){return{type:0,code:"HE",moves:1,movesPerTurn:2,initiative:2+5*Math.random(),KIA:!1,skills:[6,0,2,3,4,5],player:$player$$,name:$n$$[Math.floor(Math.random()*$n$$.length)],x:1,y:1,i:0}}},function($module$$,$exports$$){$exports$$.NAMES="Alice,Artur,Ben,Bony,Chris,Clara,Dave,Daisy,Eugene,Elisa,Frank,Faye,Glen,Gene,Gideon,Ghandi,Henry,Hanna,Izac,Ida,Jack,Julia,Kevin,Kate,Lee,Lena,Matt,Martha,Nick,Nina,Odin,Olga,Pete,Pati,Ron,Rose,Stan,Suzie,Tom,Tracy,Uma,Ugo,Wayne,Wanda,Xena,Xavier,Yuri,Yara,Zack,Zoe"},
function($module$$,$exports$$,$__webpack_require__$$){var $state_ts_1$$=$__webpack_require__$$(17),$state_1$$=$__webpack_require__$$(9),$hexMap$$=["####   ## ","CONNECTING","Squad","##  "].map(function($l$$,$y$$){return $state_1$$.toHex($y$$,$l$$)});$exports$$.menuReducer=function menuReducer($state$$,$action$$){switch($action$$.do){case 1:return $state_ts_1$$.gamePlay();case 12:return $state$$.hexMap=$hexMap$$,$state$$.local=!1,$state$$;default:return $state$$}}},function($module$$,$exports$$,$__webpack_require__$$){var $mapGen_1$$=
$__webpack_require__$$(5),$squad_1$$=$__webpack_require__$$(13),$reducer_1$$=$__webpack_require__$$(11);$exports$$.gamePlay=function gamePlay(){var $state$$={location:1,hexMap:$mapGen_1$$.mapGen(),behaviours:[],animations:[{anime:0,payload:{}}],soldiers:[],active:-1,lastWinner:!1,local:!0,disc:[],evac:[[],[]]};$state$$.hexMap.forEach(function($l$$){return $l$$.forEach(function($h$$){switch($h$$.type){case 4:return $state$$.disc=[$h$$.x,$h$$.y];case 3:return 0===$h$$.player?$state$$.evac[0]=[$h$$.x,
$h$$.y]:$state$$.evac[1]=[$h$$.x,$h$$.y]}})});return $reducer_1$$.nextSoldier($squad_1$$.createSquads($state$$))}},function($module$$,$exports$$,$__webpack_require__$$){var $make_1$$=$__webpack_require__$$(3),$game_1$$=$__webpack_require__$$(19),$state_1$$=$__webpack_require__$$(9),$render_1$$=$__webpack_require__$$(20),$render_2$$=$__webpack_require__$$(23),$animate_1$$=$__webpack_require__$$(10),$reducer_1$$=$__webpack_require__$$(11),$reducer_2$$=$__webpack_require__$$(16),$state_2$$=$__webpack_require__$$(17);
$exports$$.start=function start($dom$$){var $state$$=$state_1$$.menuState();$state_2$$.gamePlay();$dom$$=$make_1$$.makeRender([$render_1$$.menuRender,$render_2$$.gameRender],$dom$$);var $reduce$$=$make_1$$.makeReducer([$reducer_2$$.menuReducer,$reducer_1$$.gameReducer]),$animate$$=$make_1$$.makeAnimate([$animate_1$$.gameAnimate]);new $game_1$$.Game($state$$,$dom$$,$make_1$$.behave,$reduce$$,$animate$$)}},function($Game_module$$,$exports$$,$__webpack_require__$$){var $state_1$$=$__webpack_require__$$(9),
$make_1$$=$__webpack_require__$$(3);$Game_module$$=function $$Game_module$$$($state$$,$render$$,$behave$$,$reducer$$,$animate$$){this.state=$state$$;this.render=$render$$;this.behave=$behave$$;this.reducer=$reducer$$;this.animate=$animate$$;this.actions=[];this.act=this.act.bind(this);this.glitch=this.glitch.bind(this);this.render=this.render.bind(this);this.reducer=this.reducer.bind(this);this.behave=this.behave.bind(this);this.animate=this.animate.bind(this);this.act({do:0,active:0,player:0,payload:{}});
this.initSocket()};$Game_module$$.prototype.act=function $$Game_module$$$$act$($action$$){if(!0===this.state.local){12===$action$$.do&&this.socket.emit("waiting");if(10===$action$$.do||4<this.actions.length&&.985<Math.random())return this.glitch($make_1$$.cloneDeep(this.initState),[].concat($jscomp.arrayFromIterable(this.actions)));var $state$$=this.reducer(this.state,$action$$);this.saveState($state$$,$action$$);this.render($state$$);this.behave($state$$.behaviours,this.act);this.animate(-1<$state$$.animations.findIndex(function($a$$){return $a$$.payload&&
10===$a$$.payload.do})?$state$$.animations.filter(function($a$$){return $a$$.payload&&10===$a$$.payload.do}):$state$$.animations,this.act);$state$$.animations=[];this.state=$state$$}else this.emit($action$$)};$Game_module$$.prototype.emit=function $$Game_module$$$$emit$($action$$){this.socket.emit("action",$action$$)};$Game_module$$.prototype.saveState=function $$Game_module$$$$saveState$($state$$,$action$$){1===$action$$.do?(this.initState=$make_1$$.cloneDeep($state$$),this.actions=[]):11!==$action$$.do?
this.actions.push($action$$):""};$Game_module$$.prototype.glitch=function $$Game_module$$$$glitch$($state$$,$actions$$){var $action$$=$actions$$.shift();$state$$.active=$action$$.active;if(0<$actions$$.length){var $$jscomp$this$$=this;$state$$.glitch=!0;var $nstate$$=this.reducer($state$$,$action$$);this.render($nstate$$);$nstate$$.animations=[];setTimeout(function(){return $$jscomp$this$$.glitch($nstate$$,$actions$$)},140)}else $state$$.glitch=!1,$action$$=this.reducer($state$$,$action$$),this.render($action$$),
$action$$.animations=$action$$.animations.filter(function($a$$){return $a$$.payload?10!==$a$$.payload.do:!0}),$action$$.animations=-1<$action$$.animations.findIndex(function($a$$){return $a$$.payload&&11===$a$$.payload.do})?$action$$.animations.filter(function($a$$){return $a$$.payload&&3===$a$$.payload.do}):$action$$.animations,this.behave($action$$.behaviours,this.act),this.animate($action$$.animations,this.act),this.state=$action$$};$Game_module$$.prototype.initSocket=function $$Game_module$$$$initSocket$(){var $$jscomp$this$$=
this;this.socket=window.io({upgrade:!1,transports:["websocket"]});this.socket.on("state",function($s$$){$$jscomp$this$$.state=$s$$;$$jscomp$this$$.render($s$$);$$jscomp$this$$.behave($s$$.behaviours,$$jscomp$this$$.act)});this.socket.on("connect",function(){});this.socket.on("disconnect",function(){$$jscomp$this$$.state=$state_1$$.menuState();$$jscomp$this$$.act({do:0,active:0,player:0,payload:{}});alert("disconnected")});this.socket.on("error",function(){$$jscomp$this$$.state=$state_1$$.menuState();
$$jscomp$this$$.act({do:0,active:0,player:0,payload:{}});alert("server error")})};$exports$$.Game=$Game_module$$},function($module$$,$exports$$,$__webpack_require__$$){var $render_1$$=$__webpack_require__$$(21);$exports$$.menuRender=function menuRender($state$$){return 0===$state$$.location?'\n\t    <div class="info-header">Glitchsquad 2016</div>\n\t    <div class="menu-hex"> '+$render_1$$.mapRender($state$$)+"\n\t    <div>\n\t ":""}},function($module$$,$exports$$,$__webpack_require__$$){var $render_1$$=
$__webpack_require__$$(22);$exports$$.mapRender=function mapRender($state$$){function $lineRender$$($line$$,$lnum$$){function $hexRender$$($hex$$){function $walls$$($walls$$){return $walls$$.reduce(function($p$$,$n$$,$i$$){return $p$$+('<div class="hw hw-a-'+$i$$+" hw-t-"+$n$$+'"></div>')},"")}return'<li class="hex '+(0===$hex$$.type?"empty":"")+'"\n\t\t      id="hex-'+$hex$$.x+"-"+$hex$$.y+'">\n\t\t       '+(0!==$hex$$.type?$walls$$($hex$$.walls):"")+"\n\t               "+$render_1$$.squadRender($hex$$.soldiers,
$state$$)+"\n\t\t       "+(2===$hex$$.type&&" "!==$hex$$.char?'<div class="char">'+$hex$$.char+"</div>":"")+"\n\t\t       "+(4===$hex$$.type?'<div class="evac disc">DATA</div>':"")+"\n\t\t       "+(3===$hex$$.type?'<div class="evac c-p'+$hex$$.player+'">evac</div>':"")+"\n\t\t       "+function acts($behaviours$$){return'<div class="h-acts l'+$behaviours$$.length+'">'+$behaviours$$.reduce(function($p$$,$c$$,$i$$){return $p$$+('<div class="h-act '+$c$$.color+'" \n\t\t id="'+$c$$.id+'"><span>'+$c$$.display+
"</span></div>\n\t        ")},"")+"</div>"}($hex$$.acts)+"\n\t\t  </li>"}return'<ol class="hexline hexline-'+($lnum$$%2?"even":"odd")+'"> \n\t     '+$line$$.reduce(function($p$$,$n$$){return $p$$+$hexRender$$($n$$)},"")+" \n\t    </ol>"}return'<div id="hexmap" class="hexcontainer"> \n\t      '+$state$$.hexMap.reduce(function($p$$,$n$$,$i$$){return $p$$+$lineRender$$($n$$,$i$$)},"")+"\n\t    </div>"}},function($module$$,$exports$$){$exports$$.squadRender=function squadRender($soldiers$$,$state$$,$full$$){function $renderSoldier$$($soldier$$){function $acts$$(){function $on$$($l$$){return $soldier$$.x===
$l$$[0]&&$soldier$$.y===$l$$[1]}return'\n\t     <div class="acts">\n\t       <div class="ap">AP: '+$soldier$$.moves+"/"+$soldier$$.movesPerTurn+'</div>\n\t       <div id="skip-'+$soldier$$.i+'">SKIP</div>\n\t       '+($on$$($state$$.disc)&&!$soldier$$.disc?'<div class="s-action" id="grab-'+$soldier$$.i+'"}>GRAB</div>':"")+"\n\t       "+($soldier$$.disc&&$on$$($state$$.evac[$soldier$$.player])?'<div class="s-action" id="evac-'+$soldier$$.i+'">EVAC</div>':"")+"\n\t     </div>\n\t    "}var $act$$=$soldier$$.i===
$state$$.active;return'<div class="soldier s-t-'+$soldier$$.type+"\n\t\t\t\t      s-p-"+$soldier$$.player+" \n\t\t\t\t      "+($soldier$$.KIA?" s-kia":"")+"\n\t\t\t\t      "+($act$$?" s-act":"")+"\n\t\t\t\t      "+($soldier$$.disc?" s-data":"")+'">\n\t     <div class="s-code">'+$soldier$$.code+'</div>\n\t     <div class="s-name">'+$soldier$$.name+"</div>\n\t     "+($full$$&&$act$$?'<div class="s-player"> P'+($soldier$$.player+1)+"</div>":"")+"\n\t     "+($full$$&&$act$$&&!$soldier$$.KIA&&$soldier$$.moves?
$acts$$():"")+"\n\t    </div>"}return'<div class="soldiers">\n\t\t'+$soldiers$$.reduce(function($p$$,$c$$){return $p$$+$renderSoldier$$($state$$.soldiers[$c$$])},"")+"\n\t</div>"}},function($module$$,$exports$$,$__webpack_require__$$){var $render_1$$=$__webpack_require__$$(21),$render_2$$=$__webpack_require__$$(22);$exports$$.gameRender=function gameRender($state$$){return 1===$state$$.location?'\n\t    <div class="game-play '+($state$$.glitch?"glitch":"")+'">\n\t      <div class="info-header">HOT SEAT</div>\n\t      <div class="game-hex"> '+
$render_1$$.mapRender($state$$)+'</div>\n\t      <div class="squads-display"> '+$render_2$$.squadRender([0,1,2,3,4,5,6,7],$state$$,!0)+"</div>\n\t    </div>\n\t ":""}},function($module$$,$exports$$){}]);
